# 🛡️ CyberFrontier v1.0: ホワイトハッカー体験アプリ

**CyberFrontier** は、セキュリティスキルを、複雑な環境構築なしで、ゲーム感覚で学べる初学者・中級者向けの学習アプリケーションを目指します。
他社の作成したミッションを解き進めることで、サイバーセキュリティ技術（攻撃と防御）の理解を補助します。

-----

## 🎯 趣旨と目的

### 趣旨 (Core Concept)

  * **環境構築の障壁の排除:** Kali Linuxなどの本格的な環境の壁を取り払い、アプリケーション内で完結する**仮想化された実践環境**を提供します。
  * **ロールプレイング学習:** プレイヤーはSOC/CSIRTメンバーとして「操作端末」にログインし、アラートやインシデントに基づき調査・対応を行う、没入感の高い学習フローを提供します。
  * **コミュニティ主導のコンテンツ:** 外部JSONファイルとしてミッションを定義し、他者がミッションを作成・配布できるエコシステムを構築します。

### 目的 (Learning Goals)

1.  **インシデント対応の基礎習得:** 監視アラートから始まり、調査、分析、封じ込め、復旧に至る**インシデント対応のプロセス**を理解する。
2.  **実践的な技術の習得:** ネットワーク解析、Web脆弱性診断、バイナリ解析など、多岐にわたるセキュリティ分野の**基礎技術とツール操作**を習得する。
3.  **効率性と時間管理の強化:** 上級ミッションにおける**時間制限**を通じて、迅速かつ正確な判断力を養う。

-----

## 💻 実装する機能・要素一覧 (v1.0)

Godotエンジンで開発され、以下の主要機能と要素を実装します。

### 1\. アプリケーションの基盤とターミナル機能

| 機能カテゴリ | 実装要素 | 目的/詳細 |
| :--- | :--- | :--- |
| **GUI/UX** | サイドバーメニュー | アプリ内セキュリティツールを起動するための統一インターフェース。 |
| **ターミナル** | 操作端末（CLI） | プレイヤーの主操作環境。基本コマンド（`ls`, `cd`, `grep`など）と、各機能の**ラッパーコマンド**（例: `portscan <IP>`）を実装。 |
| **仮想環境** | 仮想ファイルシステム (VFS) | ミッションで必要なログ、バイナリ、PCAPなどのファイルを配置し、ターミナルで操作できるようにする。 |
| **学習支援** | メモ機能 | 発見したフラグや情報をターミナルまたは専用UIから記録。 |

### 2\. 仮想化セキュリティツール群

| ツール名 | 実装要素 | 目的/詳細 |
| :--- | :--- | :--- |
| **ネットワーク** | ネットワークマッピングビューア | ミッションJSONから読み込んだノード情報、IP、役割、接続状況をグラフィカルに表示。 |
| **Web** | ブラウザ機能 | Web脆弱性ミッション（XSS, CSRFなど）の標的となるWeb画面をシミュレート。 |
| **API** | REST APIクライアント | 標的の仮想APIへのリクエスト（GET/POSTなど）送信を可能にする。CLI（`curl`エミュレーション）との連携。 |
| **解析** | ポートスキャン機能 | ターゲットIPのオープンポートを調査する（ミッションJSONの定義と連携）。 |
| **解析** | パケットキャプチャ | PCAPファイルの読み込みと、プロトコル情報の簡易デコード表示。 |
| **解析** | バイナリ解析機能 | 仮想バイナリファイルの簡易的な静的/動的解析をシミュレート。 |
| **防御** | Firewall設定機能 | 自身の操作端末や仮想ネットワーク内のFirewallルールを設定・テスト。 |
| **DB操作** | 仮想SQLクライアント | **SQLインジェクション成功後**、仮想DBへの接続と**SELECTクエリ**の実行を可能にし、データ窃取のプロセスを再現。 |
| **仮想化** | 仮想Mockサーバー | ブラウザ/APIクライアントからのリクエストを受け付け、脆弱性を持つWebサーバーやAPI、そしてデータベースの役割をアプリ内でエミュレート。 |

### 3\. ミッション管理と学習フィードバック

| 機能カテゴリ | 実装要素 | 目的/詳細 |
| :--- | :--- | :--- |
| **ミッション** | ミッション JSONパーサー/ローダー | 外部のJSONファイル（`mission_template.json`）を読み込み、ミッション環境を構築する。 |
| **ミッション** | フラグ提出・判定 | ユーザーが発見したフラグを入力し、`clear_condition.flag`と照合してクリアを判定する。 |
| **ミッション** | 環境リセット | 進行中のミッション環境を初期状態に戻す。 |
| **学習** | ステップ別ヒント/解説 | 詰まった時のヒント表示と、クリア後の原理・防御策（`solution_explanation`）の表示。 |
| **学習** | 進捗トラッキング/ログ | クリア状況の記録と、操作コマンドのログ記録機能。 |
| **制限時間** | タイマー機能 (上級) | `timing.limit_seconds`に基づいたカウントダウンUIと、時間切れ時のペナルティ処理。 |
| **環境定義** | ネットワーク/DB定義の利用 | JSON内の`network_definition`と`database_definition`を活用し、アプリ内で構成図をグラフィカルに表示する。 |

-----

## 💾 ミッション JSONファイルの定義（設計図）

ミッションクリエイターが作成するJSONファイルの核となるセクションです。

```json
{
  "mission_id": "...",
  "title": "...",
  "category": "...",
  "difficulty": "...",
  "timing": {
    "has_time_limit": true,
    "limit_seconds": 1800,
    "time_up_action": "RESTART_OR_PENALTY"
  },
  "setup": {
    "target_server": "...",
    "required_tool": ["Terminal", "PortScan"],
    "network_definition": { ... }, // ネットワークマップの定義
    "database_definition": { ... }, // SQLミッション用のDBスキーマ定義
    "initial_files": [ ... ]
  },
  "steps": [
    { "hint": "...", "action": "terminal_input", "required_command": "..." }
  ],
  "clear_condition": {
    "type": "flag_submission",
    "flag": "cf_flag{...}"
  },
  "solution_explanation": {
    "principle": "...",
    "defense": "..."
  }
}
```